<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‰“çˆ†TA | ç‚¹å‡»å¤´åƒæ— é™æš´å‡»âœ¨</title>
    <style>
        * {margin: 0;padding: 0;box-sizing: border-box;font-family: "Microsoft YaHei", sans-serif;}
        body {
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow: hidden;
        }
        /* é¡µé¢æ ‡é¢˜ */
        .title {color: #fff;text-align: center;margin-bottom: 30px;}
        .title h1 {font-size: 40px;text-shadow: 0 0 20px #ff2e63, 0 0 40px #ff2e63;}
        .title p {font-size: 16px;color: #a8dadc;margin-top: 8px;}
        /* åå­—ç¼–è¾‘åŒº */
        .name-edit {display: flex;align-items: center;gap: 15px;margin-bottom: 40px;background: rgba(255,255,255,0.1);padding: 15px 25px;border-radius: 50px;border: 2px solid #4cc9f0;backdrop-filter: blur(10px);}
        .name-edit label {color: #fff;font-size: 18px;font-weight: bold;}
        #target-name {
            width: 220px;
            padding: 12px 20px;
            border: none;
            border-radius: 30px;
            font-size: 18px;
            outline: none;
            background: rgba(255,255,255,0.9);
            color: #16213e;
            text-align: center;
        }
        #target-name::placeholder {color: #999;}
        /* æ ¸å¿ƒäº’åŠ¨åŒº */
        .main-box {
            position: relative;
            width: 100%;
            max-width: 600px;
            height: 400px;
            background: rgba(255,255,255,0.05);
            border-radius: 20px;
            border: 2px solid #4cc9f0;
            backdrop-filter: blur(15px);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            margin-bottom: 30px;
        }
        /* ç›®æ ‡äººç‰©å®¹å™¨ */
        .target-box {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            z-index: 10;
            cursor: pointer; /* é¼ æ ‡æ‚¬æµ®å˜æ‰‹å‹ï¼Œæç¤ºå¯ç‚¹å‡» */
        }
        /* äººç‰©å¤´åƒ âœ… é‡ç‚¹ï¼šæ”¾å¤§ç‚¹å‡»åŒºåŸŸ+æ‚¬åœå‘å…‰+ç‚¹å‡»åé¦ˆ */
        .target-avatar {
            width: 150px;
            height: 150px;
            background: linear-gradient(45deg, #ff2e63, #f72585);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            color: #fff;
            border: 4px solid #fff;
            box-shadow: 0 0 30px #ff2e63, 0 0 60px #ff2e63;
            margin-bottom: 20px;
            transition: all 0.1s ease; /* ç‚¹å‡»ç¼©æ”¾åé¦ˆ */
        }
        /* å¤´åƒæ‚¬åœ+ç‚¹å‡»ç‰¹æ•ˆ */
        .target-avatar:hover {transform: scale(1.05);box-shadow: 0 0 40px #ff2e63, 0 0 80px #ff2e63;}
        .target-avatar:active {transform: scale(0.95);} /* ç‚¹å‡»ç¬é—´ç¼©å°ï¼Œåé¦ˆè¶…å¼º */
        /* ç›®æ ‡åå­—æ˜¾ç¤º */
        .target-name-text {
            font-size: 28px;
            color: #fff;
            font-weight: bold;
            text-shadow: 0 0 10px #4cc9f0, 0 0 20px #4cc9f0;
            text-align: center;
        }
        /* æŒ‰é’®åŒº */
        .btn-group {display: flex;gap: 20px;}
        .btn {
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(0,0,0,0.2);
        }
        #reset-btn {background: linear-gradient(45deg, #4361ee, #4cc9f0);color: #fff;}
        #reset-btn:hover {transform: scale(1.05);box-shadow: 0 0 30px #4cc9f0, 0 0 60px #4cc9f0;}
        /* åˆ†æ•°æ˜¾ç¤º */
        .score-box {position: absolute;top: 20px;right: 20px;color: #fff;font-size: 22px;font-weight: bold;text-shadow: 0 0 10px #ffd166;}
        /* åŠ¨ç”»æ ·å¼ - éœ‡åŠ¨ âœ… ä¼˜åŒ–ï¼šæ›´å¿«æ›´ç´§å‡‘ï¼Œé€‚é…è¿ç»­ç‚¹å‡» */
        @keyframes shake {
            0% {transform: translate(0,0) rotate(0deg);}
            20% {transform: translate(-3px,3px) rotate(-1deg);}
            40% {transform: translate(3px,-3px) rotate(1deg);}
            60% {transform: translate(-3px,-3px) rotate(-1deg);}
            80% {transform: translate(3px,3px) rotate(1deg);}
            100% {transform: translate(0,0) rotate(0deg);}
        }
        .animate-shake {animation: shake 0.05s linear 5;} /* éœ‡åŠ¨æ›´å¿«ï¼Œè¿ç»­ç‚¹å‡»æ— æ–­å±‚ */
        /* åŠ¨ç”»æ ·å¼ - å‡»é£+å¿«é€Ÿå¤ä½ âœ… æ ¸å¿ƒï¼šç¼©çŸ­åŠ¨ç”»æ—¶é—´ï¼Œæ”¯æŒæ— é™è¿ç‚¹ */
        @keyframes fly-boom {
            0% {transform: scale(1) translate(0,0);opacity: 1;}
            30% {transform: scale(1.1) translate(-15px,-40px) rotate(8deg);opacity: 1;}
            70% {transform: scale(0.95) translate(-25px,-60px) rotate(15deg);opacity: 0.8;}
            100% {transform: scale(1) translate(0,0);opacity: 1;} /* âœ… å…³é”®ï¼šåŠ¨ç”»ç»“æŸè‡ªåŠ¨å¤ä½ï¼Œæ— éœ€ç­‰å¾…ï¼Œç›´æ¥è¿ç‚¹ */
        }
        .animate-fly {animation: fly-boom 0.4s ease forwards;} /* åŠ¨ç”»æ—¶é•¿ç¼©çŸ­ï¼Œé€‚é…é«˜é¢‘ç‚¹å‡» */
        /* çˆ†ç‚¸ç¢ç‰‡åŠ¨ç”» */
        .boom-piece {
            position: absolute;
            width: 20px;
            height: 20px;
            background: linear-gradient(45deg, #ffd166, #e74c3c);
            border-radius: 50%;
            box-shadow: 0 0 10px #ffd166;
            opacity: 0;
            z-index: 5;
        }
        @keyframes boom {
            0% {opacity: 1;transform: scale(1) translate(0,0);}
            100% {opacity: 0;transform: scale(0.5) translate(var(--x), var(--y));}
        }
        /* æš´å‡»æ–‡å­—åŠ¨ç”» âœ… æ›´å¿«æ›´é†’ç›® */
        .hit-text {
            position: absolute;
            font-size: 35px;
            font-weight: bold;
            color: #ffd166;
            text-shadow: 0 0 10px #ffd166, 0 0 20px #e74c3c;
            opacity: 0;
            z-index: 20;
        }
        @keyframes hit-text-animate {
            0% {opacity: 1;transform: scale(1) translate(0,0);}
            50% {opacity: 1;transform: scale(1.3) translate(0,-15px);}
            100% {opacity: 0;transform: scale(0.9) translate(0,-30px);}
        }
        /* å“åº”å¼é€‚é…æ‰‹æœº */
        @media (max-width: 768px) {
            .title h1 {font-size: 30px;}
            .title p {font-size: 14px;}
            .name-edit {flex-direction: column;gap: 10px;padding: 15px;border-radius: 20px;width: 100%;}
            #target-name {width: 100%;font-size: 16px;}
            .target-avatar {width: 120px;height: 120px;font-size: 40px;}
            .target-name-text {font-size: 24px;}
            .btn-group {flex-direction: column;width: 100%;gap: 15px;}
            .btn {width: 100%;padding: 12px 0;font-size: 18px;}
            .score-box {font-size: 18px;top: 15px;right: 15px;}
        }
    </style>
</head>
<body>
    <!-- æ ‡é¢˜åŒº -->
    <div class="title">
        <h1>æ‰“çˆ†TA ğŸ”¥</h1>
        <p>âœ… ç‚¹å‡»å¤´åƒæ— é™æš´å‡» âœ… ç‚¹è¶Šå¿«åˆ†è¶Šé«˜ âœ… è¾“å…¥åå­—è‡ªå®šä¹‰</p>
    </div>

    <!-- åå­—ç¼–è¾‘åŒº -->
    <div class="name-edit">
        <label>ç›®æ ‡åå­—ï¼š</label>
        <input type="text" id="target-name" placeholder="è¯·è¾“å…¥è¦æ‰“çˆ†çš„åå­—" value="å¼ ä¸‰">
    </div>

    <!-- æ ¸å¿ƒäº’åŠ¨åŒº -->
    <div class="main-box">
        <!-- åˆ†æ•°æ˜¾ç¤º -->
        <div class="score-box">æš´å‡»åˆ†æ•°ï¼š<span id="score">0</span></div>
        <!-- ç›®æ ‡äººç‰© âœ… æ ¸å¿ƒï¼šå¤´åƒå¯ç‚¹å‡»ï¼Œæ”¯æŒæ— é™è¿ç‚¹ -->
        <div class="target-box" id="target-box">
            <div class="target-avatar" id="target-avatar">ğŸ‘¤</div>
            <div class="target-name-text" id="show-name">å¼ ä¸‰</div>
        </div>
    </div>

    <!-- æŒ‰é’®åŒºï¼ˆä»…ä¿ç•™é‡ç½®æŒ‰é’®ï¼‰ -->
    <div class="btn-group">
        <button class="btn" id="reset-btn">é‡ç½®åˆ†æ•° â†º</button>
    </div>

    <script>
        // ========== å…¨å±€å˜é‡ ==========
        const targetNameInput = document.getElementById('target-name');
        const showNameDom = document.getElementById('show-name');
        const targetBox = document.getElementById('target-box');
        const targetAvatar = document.getElementById('target-avatar');
        const resetBtn = document.getElementById('reset-btn');
        const scoreDom = document.getElementById('score');
        const mainBox = document.querySelector('.main-box');
        let score = 0;

        // ========== åˆå§‹åŒ– ==========
        window.onload = function() {
            bindNameChange();  // åå­—å®æ—¶åŒæ­¥
            bindAvatarClick(); // âœ… æ ¸å¿ƒï¼šç»‘å®šå¤´åƒç‚¹å‡»æš´å‡»ï¼ˆæ— é™é€Ÿï¼‰
            bindResetEvent();  // é‡ç½®åŠŸèƒ½
        };

        // ========== 1. åå­—å®æ—¶ç¼–è¾‘ - è¾“å…¥å³åŒæ­¥ ==========
        function bindNameChange() {
            targetNameInput.addEventListener('input', function() {
                const name = this.value.trim() || 'æ— åæ°';
                showNameDom.innerText = name;
            });
            targetNameInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    const name = this.value.trim() || 'æ— åæ°';
                    showNameDom.innerText = name;
                }
            });
        }

        // ========== 2. âœ… æ ¸å¿ƒåŠŸèƒ½ï¼šç‚¹å‡»å¤´åƒæ— é™æš´å‡»ï¼ˆæ— é€Ÿåº¦é™åˆ¶ï¼‰ ==========
        function bindAvatarClick() {
            // å¤´åƒç‚¹å‡»è§¦å‘æš´å‡»ï¼Œæ”¯æŒç–¯ç‹‚è¿ç»­ç‚¹å‡»
            targetAvatar.addEventListener('click', function() {
                // 1. è·å–å½“å‰åå­—ï¼ˆä¸ºç©ºåˆ™æ˜¾ç¤ºæ— åæ°ï¼‰
                const currentName = targetNameInput.value.trim() || 'æ— åæ°';
                showNameDom.innerText = currentName;

                // 2. ç«‹å³è§¦å‘éœ‡åŠ¨åŠ¨ç”»ï¼ˆæ¯ç‚¹ä¸€æ¬¡éƒ½éœ‡ï¼Œè¿ç‚¹è¶…çˆ½ï¼‰
                targetBox.classList.remove('animate-shake');
                // å¼ºåˆ¶åˆ·æ–°åŠ¨ç”»ï¼Œå®ç°æ— é™è¿éœ‡
                void targetBox.offsetWidth;
                targetBox.classList.add('animate-shake');

                // 3. è§¦å‘å‡»é£åŠ¨ç”»ï¼ˆæ— ç¼è¡”æ¥ï¼Œè¿ç‚¹æ— å¡é¡¿ï¼‰
                targetBox.classList.remove('animate-fly');
                void targetBox.offsetWidth;
                targetBox.classList.add('animate-fly');

                // 4. éšæœºåŠ åˆ†ï¼ˆ10-100åˆ†ï¼Œç‚¹è¶Šå¿«æ€»åˆ†è¶Šé«˜ï¼‰
                const randomScore = Math.floor(Math.random() * 90) + 10;
                score += randomScore;
                scoreDom.innerText = score;

                // 5. ç”Ÿæˆæš´å‡»æ–‡å­—+çˆ†ç‚¸ç¢ç‰‡ï¼ˆæ¯ç‚¹ä¸€æ¬¡éƒ½æœ‰ç‰¹æ•ˆï¼‰
                createHitText(randomScore);
                createBoomEffect();
            });
        }

        // ========== 3. é‡ç½®åŠŸèƒ½ - åˆ†æ•°æ¸…é›¶+æ¢å¤åˆå§‹çŠ¶æ€ ==========
        function bindResetEvent() {
            resetBtn.addEventListener('click', function() {
                score = 0;
                scoreDom.innerText = 0;
                targetNameInput.value = 'å¼ ä¸‰';
                showNameDom.innerText = 'å¼ ä¸‰';
                clearAllEffect(); // æ¸…é™¤æ®‹ç•™ç‰¹æ•ˆ
            });
        }

        // ========== ç‰¹æ•ˆç”Ÿæˆï¼ˆæ¯ç‚¹å‡»ä¸€æ¬¡éƒ½è§¦å‘ï¼Œé€‚é…è¿ç‚¹ï¼‰ ==========
        // âœ… æš´å‡»æ–‡å­—ï¼ˆéšæœºä½ç½®+æ–‡æ¡ˆï¼‰
        function createHitText(score) {
            const hitTextList = [`+${score}`, 'æš´å‡»ï¼ğŸ’¥', 'ç§’æ€ï¼ğŸ”¥', 'å¹²ç¢TAï¼âš¡', 'ç—›å‡»ï¼ğŸ’€'];
            const randomText = hitTextList[Math.floor(Math.random() * hitTextList.length)];
            const hitText = document.createElement('div');
            hitText.className = 'hit-text';
            hitText.innerText = randomText;
            // éšæœºä½ç½®ï¼ˆå¤´åƒå‘¨å›´ï¼Œä¸é‡å ï¼‰
            hitText.style.left = `${Math.random() * 300 + 150}px`;
            hitText.style.top = `${Math.random() * 150 + 100}px`;
            hitText.style.animation = 'hit-text-animate 0.8s ease forwards';
            mainBox.appendChild(hitText);
            setTimeout(() => hitText.remove(), 800);
        }

        // âœ… çˆ†ç‚¸ç¢ç‰‡ï¼ˆæ¯æ¬¡ç‚¹å‡»ç”Ÿæˆ15ä¸ªï¼Œè¿ç‚¹ç‰¹æ•ˆæ‹‰æ»¡ï¼‰
        function createBoomEffect() {
            const pieceNum = 15;
            for (let i = 0; i < pieceNum; i++) {
                const piece = document.createElement('div');
                piece.className = 'boom-piece';
                piece.style.left = '50%';
                piece.style.top = '50%';
                piece.style.transform = 'translate(-50%, -50%)';
                const randomX = Math.floor(Math.random() * 300) - 150;
                const randomY = Math.floor(Math.random() * 300) - 150;
                piece.style.setProperty('--x', `${randomX}px`);
                piece.style.setProperty('--y', `${randomY}px`);
                piece.style.animation = `boom 0.6s ease ${i * 0.03}s forwards`;
                mainBox.appendChild(piece);
                setTimeout(() => piece.remove(), 600);
            }
        }

        // âœ… æ¸…é™¤æ®‹ç•™ç‰¹æ•ˆï¼Œä¿è¯è¿ç‚¹æµç•…
        function clearAllEffect() {
            document.querySelectorAll('.boom-piece').forEach(p => p.remove());
            document.querySelectorAll('.hit-text').forEach(t => t.remove());
        }
    </script>
</body>
</html>
