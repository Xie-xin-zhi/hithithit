<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‰“çˆ†TA | å§“åå®šåˆ¶æš´å‡»åŠ¨ç”»âœ¨</title>
    <style>
        * {margin: 0;padding: 0;box-sizing: border-box;font-family: "Microsoft YaHei", sans-serif;}
        body {
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow: hidden;
        }
        /* é¡µé¢æ ‡é¢˜ */
        .title {color: #fff;text-align: center;margin-bottom: 30px;}
        .title h1 {font-size: 40px;text-shadow: 0 0 20px #ff2e63, 0 0 40px #ff2e63;}
        .title p {font-size: 16px;color: #a8dadc;margin-top: 8px;}
        /* åå­—ç¼–è¾‘åŒº */
        .name-edit {display: flex;align-items: center;gap: 15px;margin-bottom: 40px;background: rgba(255,255,255,0.1);padding: 15px 25px;border-radius: 50px;border: 2px solid #4cc9f0;backdrop-filter: blur(10px);}
        .name-edit label {color: #fff;font-size: 18px;font-weight: bold;}
        #target-name {
            width: 220px;
            padding: 12px 20px;
            border: none;
            border-radius: 30px;
            font-size: 18px;
            outline: none;
            background: rgba(255,255,255,0.9);
            color: #16213e;
            text-align: center;
        }
        #target-name::placeholder {color: #999;}
        /* æ ¸å¿ƒäº’åŠ¨åŒº */
        .main-box {
            position: relative;
            width: 100%;
            max-width: 600px;
            height: 400px;
            background: rgba(255,255,255,0.05);
            border-radius: 20px;
            border: 2px solid #4cc9f0;
            backdrop-filter: blur(15px);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            margin-bottom: 30px;
        }
        /* ç›®æ ‡äººç‰©å®¹å™¨ */
        .target-box {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            z-index: 10;
        }
        /* äººç‰©å¤´åƒ */
        .target-avatar {
            width: 150px;
            height: 150px;
            background: linear-gradient(45deg, #ff2e63, #f72585);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            color: #fff;
            border: 4px solid #fff;
            box-shadow: 0 0 30px #ff2e63, 0 0 60px #ff2e63;
            margin-bottom: 20px;
        }
        /* ç›®æ ‡åå­—æ˜¾ç¤º */
        .target-name-text {
            font-size: 28px;
            color: #fff;
            font-weight: bold;
            text-shadow: 0 0 10px #4cc9f0, 0 0 20px #4cc9f0;
            text-align: center;
        }
        /* æŒ‰é’®åŒº */
        .btn-group {display: flex;gap: 20px;}
        .btn {
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(0,0,0,0.2);
        }
        #hit-btn {background: linear-gradient(45deg, #ff2e63, #f72585);color: #fff;}
        #hit-btn:hover {transform: scale(1.05);box-shadow: 0 0 30px #ff2e63, 0 0 60px #ff2e63;}
        #reset-btn {background: linear-gradient(45deg, #4361ee, #4cc9f0);color: #fff;}
        #reset-btn:hover {transform: scale(1.05);box-shadow: 0 0 30px #4cc9f0, 0 0 60px #4cc9f0;}
        /* åˆ†æ•°æ˜¾ç¤º */
        .score-box {position: absolute;top: 20px;right: 20px;color: #fff;font-size: 22px;font-weight: bold;text-shadow: 0 0 10px #ffd166;}
        /* åŠ¨ç”»æ ·å¼ - éœ‡åŠ¨ */
        @keyframes shake {
            0% {transform: translate(0,0) rotate(0deg);}
            20% {transform: translate(-5px,5px) rotate(-2deg);}
            40% {transform: translate(5px,-5px) rotate(2deg);}
            60% {transform: translate(-5px,-5px) rotate(-2deg);}
            80% {transform: translate(5px,5px) rotate(2deg);}
            100% {transform: translate(0,0) rotate(0deg);}
        }
        .animate-shake {animation: shake 0.1s linear 10;}
        /* åŠ¨ç”»æ ·å¼ - å‡»é£+æ¶ˆå¤± */
        @keyframes fly-boom {
            0% {transform: scale(1) translate(0,0);opacity: 1;}
            50% {transform: scale(1.2) translate(-30px,-80px) rotate(15deg);opacity: 1;}
            80% {transform: scale(0.8) translate(-60px,-150px) rotate(30deg);opacity: 0.5;}
            100% {transform: scale(0) translate(-100px,-200px) rotate(45deg);opacity: 0;}
        }
        .animate-fly {animation: fly-boom 0.8s ease forwards;}
        /* çˆ†ç‚¸ç¢ç‰‡åŠ¨ç”» */
        .boom-piece {
            position: absolute;
            width: 20px;
            height: 20px;
            background: linear-gradient(45deg, #ffd166, #e74c3c);
            border-radius: 50%;
            box-shadow: 0 0 10px #ffd166;
            opacity: 0;
            z-index: 5;
        }
        @keyframes boom {
            0% {opacity: 1;transform: scale(1) translate(0,0);}
            100% {opacity: 0;transform: scale(0.5) translate(var(--x), var(--y));}
        }
        /* æš´å‡»æ–‡å­—åŠ¨ç”» */
        .hit-text {
            position: absolute;
            font-size: 40px;
            font-weight: bold;
            color: #ffd166;
            text-shadow: 0 0 10px #ffd166, 0 0 20px #e74c3c;
            opacity: 0;
            z-index: 20;
        }
        @keyframes hit-text-animate {
            0% {opacity: 1;transform: scale(1) translate(0,0);}
            50% {opacity: 1;transform: scale(1.5) translate(0,-20px);}
            100% {opacity: 0;transform: scale(0.8) translate(0,-40px);}
        }
        /* å“åº”å¼é€‚é…æ‰‹æœº */
        @media (max-width: 768px) {
            .title h1 {font-size: 30px;}
            .name-edit {flex-direction: column;gap: 10px;padding: 15px;border-radius: 20px;width: 100%;}
            #target-name {width: 100%;font-size: 16px;}
            .target-avatar {width: 120px;height: 120px;font-size: 40px;}
            .target-name-text {font-size: 24px;}
            .btn-group {flex-direction: column;width: 100%;gap: 15px;}
            .btn {width: 100%;padding: 12px 0;font-size: 18px;}
            .score-box {font-size: 18px;top: 15px;right: 15px;}
        }
    </style>
</head>
<body>
    <!-- æ ‡é¢˜åŒº -->
    <div class="title">
        <h1>æ‰“çˆ†TA ğŸ”¥</h1>
        <p>è¾“å…¥åå­— â†’ ä¸€é”®æš´å‡» â†’ è¶…ç‚«é…·åŠ¨ç”»</p>
    </div>

    <!-- åå­—ç¼–è¾‘åŒº -->
    <div class="name-edit">
        <label>ç›®æ ‡åå­—ï¼š</label>
        <input type="text" id="target-name" placeholder="è¯·è¾“å…¥è¦æ‰“çˆ†çš„åå­—" value="å¼ ä¸‰">
    </div>

    <!-- æ ¸å¿ƒäº’åŠ¨åŒº -->
    <div class="main-box">
        <!-- åˆ†æ•°æ˜¾ç¤º -->
        <div class="score-box">æš´å‡»åˆ†æ•°ï¼š<span id="score">0</span></div>
        <!-- ç›®æ ‡äººç‰© -->
        <div class="target-box" id="target-box">
            <div class="target-avatar" id="target-avatar">ğŸ‘¤</div>
            <div class="target-name-text" id="show-name">å¼ ä¸‰</div>
        </div>
    </div>

    <!-- æŒ‰é’®åŒº -->
    <div class="btn-group">
        <button class="btn" id="hit-btn">æ‰“çˆ†TA ğŸ’¥</button>
        <button class="btn" id="reset-btn">é‡ç½® â†º</button>
    </div>

    <script>
        // ========== å…¨å±€å˜é‡ ==========
        const targetNameInput = document.getElementById('target-name'); // åå­—è¾“å…¥æ¡†
        const showNameDom = document.getElementById('show-name');       // åå­—æ˜¾ç¤ºåŒº
        const targetBox = document.getElementById('target-box');         // äººç‰©å®¹å™¨
        const targetAvatar = document.getElementById('target-avatar');   // äººç‰©å¤´åƒ
        const hitBtn = document.getElementById('hit-btn');               // æ‰“çˆ†æŒ‰é’®
        const resetBtn = document.getElementById('reset-btn');           // é‡ç½®æŒ‰é’®
        const scoreDom = document.getElementById('score');               // åˆ†æ•°æ˜¾ç¤º
        const mainBox = document.querySelector('.main-box');             // ä¸»å®¹å™¨
        let score = 0;                                                   // ç´¯è®¡åˆ†æ•°
        let isAnimating = false;                                         // åŠ¨ç”»é”ï¼ˆé˜²æ­¢é‡å¤ç‚¹å‡»ï¼‰

        // ========== åˆå§‹åŒ– ==========
        window.onload = function() {
            bindNameChange();  // ç»‘å®šåå­—è¾“å…¥äº‹ä»¶
            bindHitEvent();    // ç»‘å®šæ‰“çˆ†äº‹ä»¶
            bindResetEvent();  // ç»‘å®šé‡ç½®äº‹ä»¶
        };

        // ========== 1. å®æ—¶ç¼–è¾‘åå­— - è¾“å…¥æ¡†ä¿®æ”¹ï¼Œç«‹åˆ»åŒæ­¥æ˜¾ç¤º ==========
        function bindNameChange() {
            // è¾“å…¥æ¡†è¾“å…¥æ—¶åŒæ­¥
            targetNameInput.addEventListener('input', function() {
                const name = this.value.trim() || 'æ— åæ°';
                showNameDom.innerText = name;
            });
            // å›è½¦ä¹Ÿè§¦å‘åŒæ­¥
            targetNameInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    const name = this.value.trim() || 'æ— åæ°';
                    showNameDom.innerText = name;
                }
            });
        }

        // ========== 2. æ ¸å¿ƒï¼šæ‰“çˆ†TA è§¦å‘å…¨å¥—åŠ¨ç”» ==========
        function bindHitEvent() {
            hitBtn.addEventListener('click', function() {
                // åŠ¨ç”»é”ï¼šé˜²æ­¢åŠ¨ç”»æœªå®Œæˆæ—¶é‡å¤ç‚¹å‡»ï¼Œå¯¼è‡´å¡é¡¿
                if (isAnimating) return;
                isAnimating = true;

                // æ­¥éª¤1ï¼šè·å–å½“å‰è¾“å…¥çš„åå­—ï¼ˆä¸ºç©ºåˆ™æ˜¾ç¤ºæ— åæ°ï¼‰
                const currentName = targetNameInput.value.trim() || 'æ— åæ°';
                showNameDom.innerText = currentName;

                // æ­¥éª¤2ï¼šæ·»åŠ éœ‡åŠ¨åŠ¨ç”»ï¼ˆå‰å¥ï¼Œå¢å¼ºå†²å‡»åŠ›ï¼‰
                targetBox.classList.add('animate-shake');
                
                // æ­¥éª¤3ï¼šéœ‡åŠ¨ç»“æŸåï¼Œè§¦å‘å‡»é£+çˆ†ç‚¸+æš´å‡»æ–‡å­—+åˆ†æ•°ç´¯åŠ 
                setTimeout(() => {
                    // ç§»é™¤éœ‡åŠ¨ï¼Œæ·»åŠ å‡»é£åŠ¨ç”»
                    targetBox.classList.remove('animate-shake');
                    targetBox.classList.add('animate-fly');

                    // ç”Ÿæˆéšæœºæš´å‡»åˆ†æ•°ï¼ˆ10-100åˆ†ï¼‰
                    const randomScore = Math.floor(Math.random() * 90) + 10;
                    score += randomScore;
                    scoreDom.innerText = score;

                    // ç”Ÿæˆæš´å‡»æ–‡å­—ï¼ˆæš´å‡»ï¼/ ç§’æ€ï¼/ è¶…å¼ºä¸€å‡»ï¼ï¼‰
                    createHitText(randomScore);

                    // ç”Ÿæˆçˆ†ç‚¸ç¢ç‰‡ç‰¹æ•ˆï¼ˆå…¨å±ç‚¸è£‚ï¼‰
                    createBoomEffect();

                    // æ­¥éª¤4ï¼šåŠ¨ç”»ç»“æŸåï¼Œé‡ç½®äººç‰©çŠ¶æ€ï¼ˆå¯åå¤ç‚¹å‡»ï¼‰
                    setTimeout(() => {
                        targetBox.classList.remove('animate-fly');
                        isAnimating = false; // è§£é”åŠ¨ç”»
                    }, 1000);
                }, 500);
            });
        }

        // ========== 3. é‡ç½®åŠŸèƒ½ - æ¢å¤åˆå§‹çŠ¶æ€ï¼Œåˆ†æ•°æ¸…é›¶ ==========
        function bindResetEvent() {
            resetBtn.addEventListener('click', function() {
                // æ¢å¤äººç‰©çŠ¶æ€
                targetBox.classList.remove('animate-shake', 'animate-fly');
                // åˆ†æ•°æ¸…é›¶
                score = 0;
                scoreDom.innerText = 0;
                // åå­—æ¢å¤é»˜è®¤
                targetNameInput.value = 'å¼ ä¸‰';
                showNameDom.innerText = 'å¼ ä¸‰';
                // æ¸…é™¤æ‰€æœ‰æ®‹ç•™ç‰¹æ•ˆ
                clearAllEffect();
                // è§£é”åŠ¨ç”»
                isAnimating = false;
            });
        }

        // ========== ç‰¹æ•ˆç”Ÿæˆå‡½æ•° ==========
        // âœ… ç”Ÿæˆæš´å‡»æ–‡å­—ï¼ˆéšæœºä½ç½®+éšæœºæ–‡æ¡ˆï¼‰
        function createHitText(score) {
            const hitTextList = [`æš´å‡»+${score}ï¼`, 'ç§’æ€ï¼ğŸ’¥', 'è¶…å¼ºä¸€å‡»ï¼ğŸ”¥', 'å¹²ç¢TAï¼âš¡', 'è‡´å‘½æ‰“å‡»ï¼ğŸ’€'];
            const randomText = hitTextList[Math.floor(Math.random() * hitTextList.length)];
            const hitText = document.createElement('div');
            hitText.className = 'hit-text';
            hitText.innerText = randomText;
            // éšæœºä½ç½®ï¼ˆäººç‰©å‘¨å›´ï¼‰
            hitText.style.left = `${Math.random() * 400 + 100}px`;
            hitText.style.top = `${Math.random() * 200 + 100}px`;
            // è§¦å‘åŠ¨ç”»
            hitText.style.animation = 'hit-text-animate 1s ease forwards';
            mainBox.appendChild(hitText);
            // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ ï¼Œé¿å…å†—ä½™
            setTimeout(() => hitText.remove(), 1000);
        }

        // âœ… ç”Ÿæˆçˆ†ç‚¸ç¢ç‰‡ç‰¹æ•ˆï¼ˆ20ä¸ªç¢ç‰‡ï¼Œéšæœºæ–¹å‘ç‚¸è£‚ï¼‰
        function createBoomEffect() {
            const pieceNum = 20; // ç¢ç‰‡æ•°é‡
            for (let i = 0; i < pieceNum; i++) {
                const piece = document.createElement('div');
                piece.className = 'boom-piece';
                // ç¢ç‰‡åˆå§‹ä½ç½®ï¼ˆäººç‰©ä¸­å¿ƒï¼‰
                piece.style.left = '50%';
                piece.style.top = '50%';
                piece.style.transform = 'translate(-50%, -50%)';
                // éšæœºç‚¸è£‚æ–¹å‘ï¼ˆx/yè½´éšæœºåç§»ï¼‰
                const randomX = Math.floor(Math.random() * 400) - 200;
                const randomY = Math.floor(Math.random() * 400) - 200;
                piece.style.setProperty('--x', `${randomX}px`);
                piece.style.setProperty('--y', `${randomY}px`);
                // è§¦å‘åŠ¨ç”»
                piece.style.animation = `boom 0.8s ease ${i * 0.05}s forwards`;
                mainBox.appendChild(piece);
                // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
                setTimeout(() => piece.remove(), 1000);
            }
        }

        // âœ… æ¸…é™¤æ‰€æœ‰æ®‹ç•™ç‰¹æ•ˆ
        function clearAllEffect() {
            const allPieces = document.querySelectorAll('.boom-piece');
            const allHitTexts = document.querySelectorAll('.hit-text');
            allPieces.forEach(p => p.remove());
            allHitTexts.forEach(t => t.remove());
        }
    </script>
</body>
</html>